<html>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<head>
<script type="text/javascript" src="../BrowserPrint-3.1.250.min.js"></script>
<script type="text/javascript">
var selected_device;
var devices = [];
function setup()
{
    //Get the default device from the application as a first step. Discovery takes longer to complete.
    BrowserPrint.getDefaultDevice("printer", function(device)
            {
        
                //Add device to list of devices and to html select element
                selected_device = device;
                devices.push(device);
                var html_select = document.getElementById("selected_device");
                var option = document.createElement("option");
                option.text = device.name;
                html_select.add(option);
                
                //Discover any other devices available to the application
                BrowserPrint.getLocalDevices(function(device_list){
                    for(var i = 0; i < device_list.length; i++)
                    {
                        //Add device to list of devices and to html select element
                        var device = device_list[i];
                        if(!selected_device || device.uid != selected_device.uid)
                        {
                            devices.push(device);
                            var option = document.createElement("option");
                            option.text = device.name;
                            option.value = device.uid;
                            html_select.add(option);
                        }
                    }
                    
                }, function(){alert("Error getting local devices")},"printer");
                
            }, function(error){
                alert(error);
            })
}
function getConfig(){
    BrowserPrint.getApplicationConfiguration(function(config){
        alert(JSON.stringify(config))
    }, function(error){
        alert(error);
    });
}
function sendZPL(){
    if(selected_device)
    {
        selected_device.send("YOUR ZPL STRING HERE", undefined, errorCallback);
    }
    else
    {
        alert("No device selected");
    }
}
function errorCallback(error){
    alert("Error: " + error);
}
</script>
</head>
<body onload="setup()">
    <select id="selected_device"></select>
    <button onclick="sendZPL()">Send ZPL</button>
    <button onclick="getConfig()">Get Config</button>
</body>
</html>